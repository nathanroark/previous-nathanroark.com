---
import Layout from '@/layouts/layout.astro'
import Card from '@/components/card.astro'

import { getCollection } from 'astro:content'

const posts = (await getCollection('books')).sort((a, b) =>
  new Date(a.data.published) > new Date(b.data.published) ? -1 : 1,
)
---

<Layout title="Favorite Books" description="My favorite books.">
  <div class="grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-5">
    {
      posts.map((post: any) => (
        <Card
          href={`/books/${post.slug}`}
          imgSrc={post.data.cover_image}
          imgAlt={post.data.title}
          title={post.data.title}
          subtitle={post.data.author}
          transitionName={`transition-${post.slug}`}
          ariaLabel={`${post.data.title} by ${post.data.author}`}
        />
      ))
    }
  </div>
</Layout>
